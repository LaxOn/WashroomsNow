<!DOCTYPE html>
<html>
    <head>
        <title>WashroomNow!</title>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <style>
            html, body {height: 100%;
                  margin: 0;
                  padding: 0;}
            #map {height: 100%}
    </style>
    </head>

    <body>
        <div id="map"></div>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDUwh7c7urXrDXemNXg3DJB8TTIWfkoQ7w&callback=initMap"
            async defer>
        </script>
        
        <script>
            function initMap() {
                if (navigator && navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
                }
                else {
                    console.log('Geolocation is not supported');
                }
            }

            function errorCallback() {}
         
            function successCallback(myloc) {
                var E5FXF = {lat: 43.472745, lng: -80.539971};
                var E5FXM = {lat: 43.472760, lng: -80.539928};
                var MyLatlng = {lat: myloc.coords.latitude, lng: myloc.coords.longitude};

                var map = new google.maps.Map(document.getElementById('map'), {
                            zoom: 40,
                            center: MyLatlng});

                var redlocation = new google.maps.Marker({
                                position: E5FXF,
                                map: map,
                                icon: {url: '/red.png'},
                                title: 'E5 Female Washroom'});

                var greenlocation = new google.maps.Marker({
                                position: E5FXM,
                                map: map,
                                icon: {url: '/green.png'},
                                title: 'E5 Male Washroom'});

                var yellowlocation = new google.maps.Marker({
                                position: {lat: 43.472745, lng: -80.538971},
                                map: map,
                                icon: {url: '/yellow.png'},
                                title: 'E5 Male Washroom'});

                var mylocation = new google.maps.Marker({
                                position: MyLatlng,
                                map: map,
                                icon: {url: '/bluestreetview.png'},
                                title: 'My Location'});
                                                                
                var currlocation = redlocation;

                var gender = 0;
                var currcontent = '';

              var currinfo = new google.maps.InfoWindow({
                   content: currcontent});

                currlocation.addListener('click', function() {
                    currinfo.open(map, currlocation)});
            }
        </script>
    </body>
</html>